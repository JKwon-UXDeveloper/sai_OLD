{"ast":null,"code":"import _asyncToGenerator from\"/Users/jaykwon/workspace/sai/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/jaykwon/workspace/sai/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/jaykwon/workspace/sai/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/jaykwon/workspace/sai/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/jaykwon/workspace/sai/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/jaykwon/workspace/sai/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _defineProperty from\"/Users/jaykwon/workspace/sai/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/jaykwon/workspace/sai/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from'react';import History from'./components/history';import HistoryAdd from'./components/historyAdd';import'./App.css';import Paper from'@material-ui/core/Paper';import Table from'@material-ui/core/Table';import TableHead from'@material-ui/core/TableHead';import TableBody from'@material-ui/core/TableBody';import TableRow from'@material-ui/core/TableRow';import TableCell from'@material-ui/core/TableCell';import CircularProgress from'@material-ui/core/CircularProgress';import{withStyles}from'@material-ui/core/styles';import MenuIcon from'@material-ui/icons/Menu';import SearchIcon from'@material-ui/icons/Search';import InputBase from'@material-ui/core/InputBase';import{fade}from'@material-ui/core/styles/colorManipulator';import Typography from'@material-ui/core/Typography';import AppBar from'@material-ui/core/AppBar';import Toolbar from'@material-ui/core/Toolbar';import IconButton from'@material-ui/core/IconButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var styles=function styles(theme){return{// root: {\n//   width: \"100%\",\n//   marginTop: theme.spacing.unit * 3,\n//   overflowX: \"auto\"\n// },\n// table: {\n//   minWidth: 1080\n// },\n// progress: {\n//   margin: theme.spacing.unit * 2\n// }\nroot:{width:\"100%\",minWidth:1080},menu:{marginTop:15,marginBottom:15,display:'flex',justifyContent:'center'},paper:{marginLeft:18,marginRight:18},progress:{margin:theme.spacing.unit*2},grow:{flexGrow:1},tableHead:{fontSize:'1.0rem'},menuButton:{marginLeft:-12,marginRight:20},title:_defineProperty({display:'none'},theme.breakpoints.up('sm'),{display:'block'}),search:_defineProperty({position:'relative',borderRadius:theme.shape.borderRadius,backgroundColor:fade(theme.palette.common.white,0.15),'&:hover':{backgroundColor:fade(theme.palette.common.white,0.25)},marginLeft:0,width:'100%'},theme.breakpoints.up('sm'),{marginLeft:theme.spacing.unit,width:'auto'}),searchIcon:{width:theme.spacing.unit*9,height:'100%',position:'absolute',pointerEvents:'none',display:'flex',alignItems:'center',justifyContent:'center'},inputRoot:{color:'inherit',width:'100%'},inputInput:_defineProperty({paddingTop:theme.spacing.unit,paddingRight:theme.spacing.unit,paddingBottom:theme.spacing.unit,paddingLeft:theme.spacing.unit*10,transition:theme.transitions.create('width'),width:'100%'},theme.breakpoints.up('sm'),{width:120,'&:focus':{width:200}})};};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={history:'',completed:0};_this.callApi=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/history');case 2:response=_context.sent;_context.next=5;return response.json();case 5:body=_context.sent;return _context.abrupt(\"return\",body);case 7:case\"end\":return _context.stop();}}},_callee);}));_this.progress=function(){var completed=_this.state.completed;_this.setState({completed:completed>=100?0:completed+1});};_this.state={history:'',completed:0,searchKeyword:''};_this.stateRefresh=_this.stateRefresh.bind(_assertThisInitialized(_this));_this.handleValueChange=_this.handleValueChange.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"stateRefresh\",value:function stateRefresh(){var _this2=this;this.setState({history:'',completed:0,searchKeyword:''});this.callApi().then(function(res){return _this2.setState({history:res});}).catch(function(err){return console.log(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;this.timer=setInterval(this.progress,20);this.callApi().then(function(res){return _this3.setState({history:res});}).catch(function(err){return console.log(err);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.timer);}},{key:\"handleValueChange\",value:function handleValueChange(e){var nextState={};nextState[e.target.name]=e.target.value;this.setState(nextState);}},{key:\"render\",value:function render(){var _this4=this;var classes=this.props.classes;var cellList=[\"Index\",\"UID\",\"Component\",\"Language\",\"AS IS\",\"TO BE\",\"Settings\"];var filteredComponents=function filteredComponents(data){data=data.filter(function(c){return c.uid.indexOf(_this4.state.searchKeyword)>-1;});return data.map(function(c){return/*#__PURE__*/_jsx(History,{stateRefresh:_this4.stateRefresh,id:c.id,uid:c.uid,component:c.component,language:c.language,as_is:c.as_is,to_be:c.to_be},c.id);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{className:classes.menuButton,color:\"inherit\",\"aria-label\":\"Open drawer\",children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Typography,{className:classes.title,variant:\"h6\",color:\"inherit\",noWrap:true,children:\"Standard Multi Language DB\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.grow}),/*#__PURE__*/_jsxs(\"div\",{className:classes.search,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.searchIcon,children:/*#__PURE__*/_jsx(SearchIcon,{})}),/*#__PURE__*/_jsx(InputBase,{placeholder:\"Search\",classes:{root:classes.inputRoot,input:classes.inputInput},name:\"searchKeyword\",value:this.state.searchKeyword,onChange:this.handleValueChange})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:classes.menu,children:/*#__PURE__*/_jsx(HistoryAdd,{stateRefresh:this.stateRefresh})}),/*#__PURE__*/_jsx(Paper,{className:classes.root,children:/*#__PURE__*/_jsxs(Table,{className:classes.table,children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{children:cellList.map(function(c){return/*#__PURE__*/_jsx(TableCell,{className:classes.tableHead,children:c});})})}),/*#__PURE__*/_jsx(TableBody,{children:this.state.history?// this.state.history.map(c => {\n//   return <History key={c.id} id={c.id} uid={c.uid} component={c.component} language={c.language} as_is={c.as_is} to_be={c.to_be} />\n// }) :\nfilteredComponents(this.state.history):/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:\"6\",align:\"center\",children:/*#__PURE__*/_jsx(CircularProgress,{className:classes.progress,variant:\"determinate\",value:this.state.completed})})})})]})})]});}}]);return App;}(Component);export default withStyles(styles)(App);","map":{"version":3,"sources":["/Users/jaykwon/workspace/sai/client/src/App.js"],"names":["React","Component","History","HistoryAdd","Paper","Table","TableHead","TableBody","TableRow","TableCell","CircularProgress","withStyles","MenuIcon","SearchIcon","InputBase","fade","Typography","AppBar","Toolbar","IconButton","styles","theme","root","width","minWidth","menu","marginTop","marginBottom","display","justifyContent","paper","marginLeft","marginRight","progress","margin","spacing","unit","grow","flexGrow","tableHead","fontSize","menuButton","title","breakpoints","up","search","position","borderRadius","shape","backgroundColor","palette","common","white","searchIcon","height","pointerEvents","alignItems","inputRoot","color","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","App","props","state","history","completed","callApi","fetch","response","json","body","setState","searchKeyword","stateRefresh","bind","handleValueChange","then","res","catch","err","console","log","timer","setInterval","clearInterval","e","nextState","target","name","value","classes","cellList","filteredComponents","data","filter","c","uid","indexOf","map","id","component","language","as_is","to_be","input","table"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport History from './components/history';\nimport HistoryAdd from './components/historyAdd';\nimport './App.css';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { withStyles } from '@material-ui/core/styles';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputBase from '@material-ui/core/InputBase';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst styles = theme => ({\n  // root: {\n  //   width: \"100%\",\n  //   marginTop: theme.spacing.unit * 3,\n  //   overflowX: \"auto\"\n  // },\n  // table: {\n  //   minWidth: 1080\n  // },\n  // progress: {\n  //   margin: theme.spacing.unit * 2\n  // }\n\n\n  root: {\n    width: \"100%\",\n    minWidth: 1080\n  },\n  menu: {\n    marginTop: 15,\n    marginBottom: 15,\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  paper: {\n    marginLeft: 18,\n    marginRight: 18\n  },\n  progress: {\n    margin: theme.spacing.unit * 2\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  tableHead: {\n    fontSize: '1.0rem'\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing.unit,\n      width: 'auto',\n    },\n  },\n  searchIcon: {\n    width: theme.spacing.unit * 9,\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n    width: '100%',\n  },\n  inputInput: {\n    paddingTop: theme.spacing.unit,\n    paddingRight: theme.spacing.unit,\n    paddingBottom: theme.spacing.unit,\n    paddingLeft: theme.spacing.unit * 10,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: 120,\n      '&:focus': {\n        width: 200,\n      },\n    },\n  }\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: '',\n      completed: 0,\n      searchKeyword: ''\n    } \n    this.stateRefresh = this.stateRefresh.bind(this);\n    this.handleValueChange = this.handleValueChange.bind(this)\n  }\n\n  state = {\n    history: '',\n    completed: 0\n  }\n\n  stateRefresh() {\n    this.setState({\n      history: '',\n      completed: 0,\n      searchKeyword: ''\n    });\n    this.callApi()\n    .then(res => this.setState({history: res}))\n    .catch(err => console.log(err));\n  }\n\n  componentDidMount() {\n    this.timer = setInterval(this.progress, 20);\n    this.callApi()\n    .then(res => this.setState({history: res}))\n    .catch(err => console.log(err));\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  callApi = async () => {\n    const response = await fetch('/api/history');\n    const body = await response.json();\n    return body;\n  }\n\n  progress = () => {\n    const { completed } = this.state;\n    this.setState({ completed: completed >= 100 ? 0 : completed + 1 });\n  };\n\n  handleValueChange(e) {\n    let nextState = {};\n    nextState[e.target.name] = e.target.value;\n    this.setState(nextState);\n  } \n\n  render() {\n    const { classes } = this.props;\n    const cellList = [\"Index\", \"UID\", \"Component\", \"Language\", \"AS IS\", \"TO BE\", \"Settings\"]\n    \n    const filteredComponents = (data) => {\n      data = data.filter((c) => {\n        return c.uid.indexOf(this.state.searchKeyword) > -1;\n      });\n      return data.map((c) => {\n        return <History \n        stateRefresh={this.stateRefresh} \n        key={c.id} id={c.id} uid={c.uid} component={c.component} language={c.language} as_is={c.as_is} to_be={c.to_be} />\n      });\n    }\n    \n    return (\n      <div>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Open drawer\">\n              <MenuIcon />\n            </IconButton>\n            <Typography className={classes.title} variant=\"h6\" color=\"inherit\" noWrap>\n              Standard Multi Language DB\n            </Typography>\n            <div className={classes.grow} />\n            <div className={classes.search}>\n              <div className={classes.searchIcon}>\n                <SearchIcon />\n              </div>\n              <InputBase\n                placeholder=\"Search\"\n                classes={{\n                  root: classes.inputRoot,\n                  input: classes.inputInput,\n                }}\n                name=\"searchKeyword\"\n                value={this.state.searchKeyword}\n                onChange={this.handleValueChange}\n              />\n            </div>\n          </Toolbar>\n        </AppBar>\n        <div className={classes.menu}>\n        <HistoryAdd stateRefresh={this.stateRefresh} />\n        </div>\n        <Paper className={classes.root}>\n          <Table className={classes.table}>\n            <TableHead>\n              <TableRow>\n                {cellList.map(c => {\n                  return <TableCell className={classes.tableHead}>{c}</TableCell>\n                })}\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {this.state.history ?\n              // this.state.history.map(c => {\n              //   return <History key={c.id} id={c.id} uid={c.uid} component={c.component} language={c.language} as_is={c.as_is} to_be={c.to_be} />\n              // }) :\n              filteredComponents(this.state.history) :\n              <TableRow>\n                <TableCell colSpan=\"6\" align=\"center\">\n                  <CircularProgress className={classes.progress} variant=\"determinate\" value={this.state.completed} />\n                </TableCell>\n              </TableRow>\n              }\n            </TableBody>\n          </Table>\n        </Paper>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(App);"]},"metadata":{},"sourceType":"module"}